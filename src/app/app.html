<div class="min-h-screen bg-gray-50">
  <!-- Header -->
  @if (showHeader && (authService.currentUser$ | async); as user) {
  <mat-toolbar color="primary" class="shadow-md">
    <div class="container mx-auto px-4 flex items-center justify-between">
      <!-- Logo -->
      <div class="flex items-center cursor-pointer" routerLink="/dashboard">
        <mat-icon class="mr-2">account_tree</mat-icon>
        <span class="text-xl font-bold">MLM System</span>
      </div>

      <!-- Navigation -->
      <div class="hidden md:flex items-center space-x-4">
        <button mat-button routerLink="/dashboard" routerLinkActive="active">
          <mat-icon class="mr-1">dashboard</mat-icon>
          Dashboard
        </button>
        <button mat-button routerLink="/users/hierarchy" routerLinkActive="active">
          <mat-icon class="mr-1">account_tree</mat-icon>
          Hierarchy
        </button>
        <button mat-button routerLink="/balance/transfer" routerLinkActive="active">
          <mat-icon class="mr-1">swap_vert</mat-icon>
          Transfer
        </button>
        <button mat-button routerLink="/transactions" routerLinkActive="active">
          <mat-icon class="mr-1">history</mat-icon>
          Transactions
        </button>
        <button mat-button routerLink="/users/create" routerLinkActive="active">
          <mat-icon class="mr-1">person_add</mat-icon>
          Create User
        </button>
      </div>

      <!-- User Info & Logout -->
      <div class="flex items-center space-x-4">
        <div class="hidden md:flex items-center space-x-2">
          <div class="text-right">
            <p class="font-medium">{{ user.username }}</p>
            <span class="text-xs px-2 py-1 rounded-full" [ngClass]="getRoleBadgeColor(user.role)">
              {{ user.role | titlecase }}
            </span>
          </div>
        </div>

        <button mat-stroked-button color="warn" (click)="logout()">
          <mat-icon>logout</mat-icon>
          Logout
        </button>

        <!-- Mobile Menu -->
        <button mat-icon-button [matMenuTriggerFor]="mobileMenu" class="md:hidden">
          <mat-icon>menu</mat-icon>
        </button>
        <mat-menu #mobileMenu="matMenu">
          <button mat-menu-item routerLink="/dashboard">
            <mat-icon>dashboard</mat-icon>
            Dashboard
          </button>
          <button mat-menu-item routerLink="/users/hierarchy">
            <mat-icon>account_tree</mat-icon>
            Hierarchy
          </button>
          <button mat-menu-item routerLink="/balance/transfer">
            <mat-icon>swap_vert</mat-icon>
            Transfer
          </button>
          <button mat-menu-item routerLink="/transactions">
            <mat-icon>history</mat-icon>
            Transactions
          </button>
          <button mat-menu-item routerLink="/users/create">
            <mat-icon>person_add</mat-icon>
            Create User
          </button>
        </mat-menu>
      </div>
    </div>
  </mat-toolbar>
  }

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-6">
    <router-outlet></router-outlet>
  </main>
</div>